(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8c00def8"],{6449:function(t){t.exports=JSON.parse('{"commonet":{"label":"列名称","prop":"字段名称","width":"列宽度","type":"text/number/checkbox(0,1)/button","action":"抛出的方法名称","role":"type存在时使用操作加载对应的权限名","show":"显示/隐藏列","btns":{"name":"按钮名称","type":"按钮样式","size":"按钮大小","round":"是否圆角","class":"自定义class","action":"抛出的方法名称"}},"list":[{"label":"停车场","prop":"parkName","show":true},{"label":"出口/入口","prop":"laneName","show":true,"color":"#999"},{"label":"过车方向","prop":"gateName","show":true,"color":"#999"},{"label":"过车时间","prop":"passTime","show":true,"color":"#69da61"}]}')},"9ec8":function(t,a,e){},ae38:function(t){t.exports=JSON.parse('{"commonet":{"label":"列名称","prop":"字段名称","width":"列宽度","type":"text/number/checkbox(0,1)/button","action":"抛出的方法名称","role":"type存在时使用操作加载对应的权限名","show":"显示/隐藏列","btns":{"name":"按钮名称","type":"按钮样式","size":"按钮大小","round":"是否圆角","class":"自定义class","action":"抛出的方法名称"}},"list":[{"label":"开始日期","prop":"start_time","show":true,"color":"#999"},{"label":"截止日期","prop":"end_time","show":true,"color":"#999"},{"label":"缴费金额","prop":"money","show":true,"color":"#ffcb3c"},{"label":"缴费日期","prop":"pay_time","show":true,"color":"#999"},{"label":"缴费方式","prop":"payment","show":true}]}')},b13d:function(t){t.exports=JSON.parse('{"commonet":{"label":"列名称","prop":"字段名称","width":"列宽度","type":"text/number/checkbox(0,1)/button","action":"抛出的方法名称","role":"type存在时使用操作加载对应的权限名","show":"显示/隐藏列","btns":{"name":"按钮名称","type":"按钮样式","size":"按钮大小","round":"是否圆角","class":"自定义class","action":"抛出的方法名称"}},"list":[{"label":"车辆类型","prop":"car_type_name","show":true,"color":"#999"},{"label":"车牌号码","prop":"plates","show":true,"color":"#69da61"},{"label":"车主姓名","prop":"non_owner_name","show":true},{"label":"电话号码","prop":"tel","show":true,"color":"#999"},{"label":"开始日期","prop":"starttime","show":true},{"label":"结束日期","prop":"endtime","show":true},{"label":"","width":"80","type":"icon","icon":"detail","show":true,"action":"paymentRecords","token":"Btn-WGJYQ7dpTqmEXq6bV9IJTjsQ"},{"label":"","width":"80","type":"icon","icon":"car","show":true,"action":"postRecords","token":"Btn-oLfFUp1riu7RLGRXqZCytDGL"},{"label":"操作","prop":"","width":130,"type":"button","show":true,"btns":[{"name":"重新下发","type":"primary","size":"small","round":true,"action":"issue","role":"issue","token":"Btn-oFtDWHgBW9qiPTiNsBycvTvO"}]}]}')},c733:function(t,a,e){"use strict";e("9ec8")},ee1f:function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t._self._c;t._self._setupProxy;return a("div",{attrs:{id:"car-query"}},[a("div",{staticClass:"top"},[a("div",{staticClass:"main"},[a("div",{staticClass:"common-left"},[a("span",{staticClass:"common-chose-info",on:{click:function(a){return t.$refs.showFilterVillage.showDialog()}}},[a("i",{staticClass:"iconfont icondaqu"}),t._v(" "+t._s(t.choseVillageInfo.name)+" ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchVal,expression:"searchVal"}],staticClass:"common-input",attrs:{type:"text",placeholder:"输入停车场名称/编号查询"},domProps:{value:t.searchVal},on:{input:function(a){a.target.composing||(t.searchVal=a.target.value)}}}),a("el-button",{staticClass:"common-button",attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(a){return t.keySearch(!0)}}},[t._v(" 查询 ")])],1)])]),a("div",{staticClass:"main-wp"},[a("div",{staticClass:"table-wp"},[a("cus-table",{attrs:{datas:t.tableData,cusColums:t.columns,cusConf:t.conf},on:{issue:t.issueAgain,paymentRecords:t.paymentRecords,postRecords:t.postRecords}})],1),a("div",{staticClass:"notice"},[t._v(" 注意：周期为1970-01-01表示平台上无此车辆 ")])]),a("filter-village",{ref:"showFilterVillage",attrs:{vid:t.choseVillageInfo.vid},on:{choseInfo:t.filterVillage}}),a("el-dialog",{staticClass:"payDialog",attrs:{visible:t.showPayDialog,title:t.carName+"缴费记录",width:"60%","close-on-click-modal":!1},on:{"update:visible":function(a){t.showPayDialog=a}}},[a("div",{staticClass:"table-wp"},[a("cus-table",{attrs:{datas:t.payTableData,cusColums:t.payColumns,cusConf:t.payConf}})],1)]),a("el-dialog",{staticClass:"postDialog",attrs:{visible:t.showPostDialog,title:t.carName+"过车记录",width:"60%","close-on-click-modal":!1},on:{"update:visible":function(a){t.showPostDialog=a}}},[a("div",{staticClass:"table-wp"},[a("cus-table",{attrs:{datas:t.postTableData,cusColums:t.postColumns,cusConf:t.postConf,ispaging:!0},on:{sizeChange:t.postSizeChange,currentChange:t.postCurrentChange}})],1)])],1)},o=[],i=(e("5948"),e("b13d")),l=e("ae38"),n=e("6449"),r={name:"carQuery",data(){return{urlObj:{searchCarInfo:this.$api.state.Car.searchCarInfo.url,carpaylog:this.$api.state.Car.carpaylog.url,carpassinglog:this.$api.state.Car.carpassinglog.url,issueCar:this.$api.state.Means.issueCar.url},choseVillageInfo:{name:"全部项目",vid:0},searchVal:"",tableData:[],columns:i.list,conf:{loadStatus:!1,emptyText:"",curPage:1,limit:10,dataTotal:0},payTableData:[],payColumns:l.list,payConf:{loadStatus:!1,emptyText:"",curPage:1,limit:20,dataTotal:0},currentIndex:0,postTableData:[],postColumns:n.list,postConf:{loadStatus:!1,emptyText:"",curPage:1,limit:20,dataTotal:0},showPayDialog:!1,showPostDialog:!1,carName:""}},mounted(){let t=sessionStorage.getItem("vid"),a=sessionStorage.getItem("vname");t&&(this.choseVillageInfo.vid=t,this.choseVillageInfo.name=a)},methods:{filterVillage(t){this.choseVillageInfo.name=t.name,this.choseVillageInfo.vid=t.vid},tableLoad(){this.conf.loadStatus=!0;let t={vid:this.choseVillageInfo.vid,plates:this.searchVal};this.$axios.post(this.urlObj.searchCarInfo,t).then(t=>{200===t.Code?(this.tableData=t.Data?t.Data:[],this.conf.loadStatus=!1,this.conf.emptyText=""):204===t.Code?(this.$message({message:t.Message,type:"error"}),this.$router.push({path:this.$common.state.loginPath})):(this.tableData=[],this.conf.emptyText=t.Message,this.conf.dataTotal=0,this.conf.loadStatus=!1)}).catch(()=>{this.tableData=[],this.conf.emptyText="服务器连接失败...",this.conf.dataTotal=0,this.conf.loadStatus=!1})},payTableLoad(){this.payConf.loadStatus=!0;let t={id:this.tableData[this.currentIndex].id,type:this.tableData[this.currentIndex].car_type};this.$axios.post(this.urlObj.carpaylog,t).then(t=>{200===t.Code?(t.Data&&t.Data.length>0&&t.Data.forEach(t=>{t.start_time=t.previewCostRepair.stime,t.end_time=t.previewCostRepair.etime,t.payment=t.paymentType.name}),this.payTableData=t.Data,this.payConf.loadStatus=!1,this.payConf.emptyText=""):204===t.Code?(this.$message({message:t.Message,type:"error"}),this.$router.push({path:this.$common.state.loginPath})):(this.payTableData=[],this.payConf.emptyText=t.Message,this.payConf.dataTotal=0,this.payConf.loadStatus=!1)}).catch(()=>{this.payTableData=[],this.payConf.emptyText="服务器连接失败...",this.payConf.dataTotal=0,this.payConf.loadStatus=!1})},postTableLoad(){this.postConf.loadStatus=!0;let t={page:this.postConf.curPage,limit:this.postConf.limit,plates:this.tableData[this.currentIndex].plates,id:this.tableData[this.currentIndex].id,type:this.tableData[this.currentIndex].car_type};this.$axios.post(this.urlObj.carpassinglog,t).then(t=>{200===t.Code?(this.postConf.dataTotal=t.Data?t.Data.total:0,this.postTableData=t.Data?t.Data.list:[],this.postConf.loadStatus=!1,this.postConf.emptyText=""):204===t.Code?(this.$message({message:t.Message,type:"error"}),this.$router.push({path:this.$common.state.loginPath})):(this.postTableData=[],this.postConf.emptyText=t.Message,this.postConf.dataTotal=0,this.postConf.loadStatus=!1)}).catch(()=>{this.postTableData=[],this.postConf.emptyText="服务器连接失败...",this.postConf.dataTotal=0,this.postConf.loadStatus=!1})},keySearch(){this.searchVal.trim()&&this.tableLoad()},postSizeChange(t){this.postConf.limit=t,this.postTableLoad()},postCurrentChange(t){this.postConf.curPage=t,this.postTableLoad()},issueAgain(t){this.$confirm("此操作将重新下发当前车辆，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{let a={id:this.tableData[t].id,type:this.tableData[t].car_type};this.$axios.post(this.urlObj.issueCar,a).then(t=>{if(200===t.Code)this.$message({message:"车辆下发成功！",type:"success"}),this.tableLoad();else{let a=t.Message?t.Message:"车辆下发失败！";this.$message({message:a,type:"error"})}}).catch(()=>{})}).catch(()=>{})},paymentRecords(t){this.currentIndex=t,this.showPayDialog=!0,this.payTableLoad()},postRecords(t){this.currentIndex=t,this.showPostDialog=!0,this.postTableLoad()}}},p=r,c=(e("c733"),e("1805")),h=Object(c["a"])(p,s,o,!1,null,null,null);a["default"]=h.exports}}]);