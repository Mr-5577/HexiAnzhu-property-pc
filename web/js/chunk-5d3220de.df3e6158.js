(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5d3220de"],{"0af2":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{attrs:{id:"facility-manage"}},[e("div",{staticClass:"top"},[e("div",{staticClass:"main"},[e("div",{staticClass:"common-left"},[e("span",{staticClass:"common-chose-info",on:{click:function(e){return t.$refs.showFilterVillage.showDialog()}}},[e("i",{staticClass:"iconfont icondaqu"}),t._v(" "+t._s(t.choseVillageInfo.name)+" ")]),e("el-date-picker",{staticClass:"common-input",attrs:{type:"date",placeholder:"选择日期","value-format":"timestamp"},model:{value:t.s_time,callback:function(e){t.s_time=e},expression:"s_time"}}),e("el-button",{staticClass:"common-button",attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.keySearch}},[t._v(" 查询 ")])],1)])]),e("div",{staticClass:"main-wp"},[e("div",{staticClass:"table-wp"},[e("cus-table",{attrs:{datas:t.tableData,cusColums:t.columns,cusConf:t.conf,ispaging:!0},on:{sizeChange:t.sizeChange,currentChange:t.currentChange}})],1)]),e("filter-village",{ref:"showFilterVillage",attrs:{vid:t.choseVillageInfo.vid},on:{choseInfo:t.filterVillage}})],1)},o=[],i=(a("5948"),a("c9ab")),l=a("4698");var c={name:"alarmLog",components:{workIcon:l["a"]},data(){return{urlObj:{applist:this.$api.state.Application.applist.url,category:this.$api.state.DeviceManage.category.url,equipments:this.$api.state.DeviceManage.equipments.url},choseVillageInfo:{name:"全部项目",vid:0},deviceType:"",searchVal:"",tableData:[],columns:i.list,s_time:"",conf:{loadStatus:!1,emptyText:"",curPage:1,limit:20,dataTotal:0}}},mounted(){let t=sessionStorage.getItem("vid"),e=sessionStorage.getItem("vname");t&&(this.choseVillageInfo.vid=t,this.choseVillageInfo.name=e),this.tableLoad()},methods:{filterVillage(t){this.choseVillageInfo.name=t.name,this.choseVillageInfo.vid=t.vid,this.deviceType="",this.searchVal="",this.conf={loadStatus:!1,emptyText:"",curPage:1,limit:20,dataTotal:0},this.tableLoad()},lazyLoad(t,e){this.$axios.post(this.urlObj.category,{pid:t.value}).then(t=>{if(200===t.Code)e(t.Data);else{let e=t.Message?t.Message:"获取设备类型数据失败！";this.$message({type:"error",message:e})}}).catch(()=>{this.$message({type:"error",message:"执行失败！"})})},tableLoad(){this.conf.loadStatus=!0;let t={page:this.conf.curPage,limit:this.conf.limit,vid:this.choseVillageInfo.vid,category:this.deviceType[this.deviceType.length-1],keywords:this.searchVal};this.$axios.post(this.urlObj.equipments,t).then(t=>{200===t.Code?(t.Data.list.forEach(t=>{t.statusColor=1==t.status?"#333":"#999"}),this.conf.dataTotal=t.Data.count,this.tableData=t.Data.list,this.conf.loadStatus=!1,this.conf.emptyText=""):204===t.Code?(this.$message({message:t.Message,type:"error"}),this.$router.push({path:this.$common.state.loginPath})):(this.tableData=[],this.conf.emptyText=t.Message,this.conf.dataTotal=0,this.conf.loadStatus=!1)}).catch(()=>{this.tableData=[],this.conf.emptyText="服务器连接失败...",this.conf.dataTotal=0,this.conf.loadStatus=!1})},keySearch(){this.conf={loadStatus:!1,emptyText:"",curPage:1,limit:20,dataTotal:0},this.tableLoad()},sizeChange(t){this.conf.limit=t,this.tableLoad()},currentChange(t){this.conf.curPage=t,this.tableLoad()}}},r=c,n=(a("138d"),a("1805")),h=Object(n["a"])(r,s,o,!1,null,null,null);e["default"]=h.exports},"138d":function(t,e,a){"use strict";a("8d00")},"8d00":function(t,e,a){},c9ab:function(t){t.exports=JSON.parse('{"commonet":{"label":"列名称","prop":"字段名称","width":"列宽度","type":"text/number/checkbox(0,1)/button","action":"抛出的方法名称","role":"type存在时使用操作加载对应的权限名","show":"显示/隐藏列","btns":{"name":"按钮名称","type":"按钮样式","size":"按钮大小","round":"是否圆角","class":"自定义class","action":"抛出的方法名称"}},"list":[{"label":"设备编号","prop":"sn","show":true,"color":"#999","width":180},{"label":"设备类型","prop":"category","show":true},{"label":"业主姓名","prop":"tags","show":true,"color":"#999"},{"label":"房号","prop":"status_text","show":true,"cstcolor":"statusColor","width":150},{"label":"业主电话","prop":"creator","show":true,"color":"#999","width":150},{"label":"报警等级","prop":"c_time","show":true,"color":"#999"},{"label":"报警时间","prop":"c_time","show":true,"color":"#999"},{"label":"报警内容","prop":"c_time","show":true,"color":"#999"},{"label":"责任人","prop":"c_time","show":true,"color":"#999"},{"label":"处理进度","prop":"c_time","show":true,"color":"#999"},{"label":"完成时间","prop":"c_time","show":true,"color":"#999"},{"label":"情况说明","prop":"c_time","show":true,"color":"#999"}]}')}}]);